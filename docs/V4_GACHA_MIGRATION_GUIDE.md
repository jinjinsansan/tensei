# V4ã‚¬ãƒãƒ£ã‚·ã‚¹ãƒ†ãƒ ç§»æ¤ã‚¬ã‚¤ãƒ‰

## ğŸ“Œ æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€å‹•ç”»ã‚¢ã‚»ãƒƒãƒˆãŒæº–å‚™ã§ããŸéš›ã«ã€å°Šå¸«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®V4ã‚¬ãƒãƒ£ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå…¨ç”»é¢å‹•ç”»æ¼”å‡ºï¼‰ã‚’æ¥ä¸–ã‚¬ãƒãƒ£ã«ç§»æ¤ã™ã‚‹ãŸã‚ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚

**ä½œæˆæ—¥**: 2026-02-13  
**æœ€çµ‚æ›´æ–°**: 2026-02-13  
**å‚ç…§å…ƒ**: `/mnt/e/dev/Cusor/sonshi/sonshigacha/`

---

## ğŸ” ç¾çŠ¶ã¨ç›®æ¨™

### ç¾çŠ¶ï¼ˆæ¥ä¸–ã‚¬ãƒãƒ£ï¼‰
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `GachaNeonPlayer` + `GachaExperience`
- **è¡¨ç¤ºæ–¹å¼**: ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã§ç°¡æ˜“è¡¨ç¤º
- **å‹•ç”»**: ãªã—ï¼ˆå‹•ç”»ã‚¢ã‚»ãƒƒãƒˆæœªæº–å‚™ï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: æ—¢å­˜ã‚¹ã‚­ãƒ¼ãƒã‚’ä½¿ç”¨

### ç›®æ¨™ï¼ˆV4ç§»æ¤å¾Œï¼‰
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `GachaV4Player`ï¼ˆå°Šå¸«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ç§»æ¤ï¼‰
- **è¡¨ç¤ºæ–¹å¼**: å…¨ç”»é¢ã§å‹•ç”»å†ç”Ÿ
- **å‹•ç”»**: R2ãƒã‚±ãƒƒãƒˆã¾ãŸã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰é…ä¿¡
- **æ¼”å‡º**: ãƒ†ãƒ­ãƒƒãƒ—ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆä»˜ã
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: V4å°‚ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 

---

## ğŸ“‹ å¿…è¦ãªå‹•ç”»ã‚¢ã‚»ãƒƒãƒˆ

### å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼
- **ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: MP4 (H.264)
- **è§£åƒåº¦**: 1080p ã¾ãŸã¯ 720p
- **ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”**: 9:16 (ç¸¦é•·ã‚¹ãƒãƒ›å‘ã‘) ã¾ãŸã¯ 16:9
- **ãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆ**: 2-5 Mbps æ¨å¥¨

### å‹•ç”»ã‚«ãƒ†ã‚´ãƒª

#### 1. ã‚¹ã‚¿ãƒ³ãƒã‚¤å‹•ç”» (Standby)
- **IDä¾‹**: S01, S02, S03, S04, S05, S06
- **èª¬æ˜**: ã‚¬ãƒãƒ£é–‹å§‹å‰ã®å¾…æ©Ÿç”»é¢
- **æ˜Ÿãƒ¬ãƒ™ãƒ«åˆ¥**: é«˜æ˜Ÿãƒ¬ãƒ™ãƒ«ã»ã©è±ªè¯ãªæ¼”å‡º

#### 2. ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³å‹•ç”» (Countdown)
- **IDä¾‹**: C01, C02, C03, C04, C05, C06
- **èª¬æ˜**: ã‚¬ãƒãƒ£é–‹å§‹ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
- **æ˜Ÿãƒ¬ãƒ™ãƒ«åˆ¥**: é«˜æ˜Ÿãƒ¬ãƒ™ãƒ«ã»ã©æ´¾æ‰‹ãªæ¼”å‡º

#### 3. ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å‹•ç”»
- **ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚° (Opening)**: OP01, OP02...
- **ãƒŸã‚¹ (Miss)**: MS01, MS02...
- **ãƒ˜ãƒ«ãƒ— (Help)**: HP01, HP02...
- **ãƒˆãƒ©ãƒ–ãƒ« (Trouble)**: TB01, TB02...
- **å›å¾© (Recovery)**: RC01, RC02...
- **ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ (Reaction)**: RT01, RT02...
- **åˆ¤å®š (Judge)**: JD01, JD02...
- **è¿½æ’ƒ (Chase)**: CH01, CH02...

### å‹•ç”»é…ç½®å ´æ‰€

**Option A: ãƒ­ãƒ¼ã‚«ãƒ«é…ç½®ï¼ˆé–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨ï¼‰**
```
/public/videos/
  â”œâ”€â”€ S01.mp4
  â”œâ”€â”€ S02.mp4
  â”œâ”€â”€ C01.mp4
  â”œâ”€â”€ OP01.mp4
  â””â”€â”€ ...
```

**Option B: R2ãƒã‚±ãƒƒãƒˆï¼ˆæœ¬ç•ªç’°å¢ƒæ¨å¥¨ï¼‰**
- Cloudflare R2 ãƒã‚±ãƒƒãƒˆã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ç’°å¢ƒå¤‰æ•° `NEXT_PUBLIC_R2_PUBLIC_BASE_URL` ã«å…¬é–‹URLã‚’è¨­å®š

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### 1. V4å‹•ç”»ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«

```sql
-- story_videos ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE IF NOT EXISTS story_videos (
  id TEXT PRIMARY KEY,
  category TEXT NOT NULL,
  filename TEXT NOT NULL,
  duration_seconds NUMERIC DEFAULT 0,
  description TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥ä¾‹
INSERT INTO story_videos (id, category, filename, duration_seconds) VALUES
  ('S01', 'opening', 'S01.mp4', 3),
  ('S02', 'opening', 'S02.mp4', 3),
  ('C01', 'countdown', 'C01.mp4', 5),
  ('OP01', 'opening', 'OP01.mp4', 8),
  ('MS01', 'miss', 'MS01.mp4', 6);
```

### 2. V4ã‚·ãƒŠãƒªã‚ªãƒ†ãƒ¼ãƒ–ãƒ«

```sql
-- story_scenarios ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE IF NOT EXISTS story_scenarios (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  star_rating INTEGER NOT NULL,
  result TEXT NOT NULL, -- 'lose', 'small_win', 'win', 'big_win', 'jackpot'
  video_sequence TEXT[] NOT NULL,
  has_chase BOOLEAN DEFAULT FALSE,
  chase_result TEXT, -- 'success' or 'fail'
  is_donden BOOLEAN DEFAULT FALSE,
  weight INTEGER DEFAULT 100,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ã‚·ãƒŠãƒªã‚ªä¾‹
INSERT INTO story_scenarios (name, star_rating, result, video_sequence, has_chase) VALUES
  ('åŸºæœ¬å‹åˆ©ã‚·ãƒŠãƒªã‚ª', 5, 'win', ARRAY['OP01', 'MS01', 'HP01', 'JD01'], FALSE),
  ('è¿½æ’ƒãƒãƒ£ãƒ³ã‚¹ã‚·ãƒŠãƒªã‚ª', 10, 'big_win', ARRAY['OP01', 'TB01', 'CH01'], TRUE);
```

### 3. RTPè¨­å®šæ‹¡å¼µ

```sql
-- rtp_settings ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚«ãƒ©ãƒ è¿½åŠ ï¼ˆæ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ãŒã‚ã‚‹å ´åˆï¼‰
ALTER TABLE rtp_settings ADD COLUMN IF NOT EXISTS min_koma INTEGER DEFAULT 3;
ALTER TABLE rtp_settings ADD COLUMN IF NOT EXISTS max_koma INTEGER DEFAULT 8;
```

---

## ğŸ“¦ ç§»æ¤ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### ã‚³ãƒ”ãƒ¼å…ƒï¼ˆå°Šå¸«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
`/mnt/e/dev/Cusor/sonshi/sonshigacha/src/`

### 1. å‹å®šç¾©

```bash
# V3å‹å®šç¾©ï¼ˆV4ã®åŸºç¤ï¼‰
src/lib/gacha/v3/types.ts
src/lib/gacha/v3/utils.ts
src/lib/gacha/v3/selectors.ts
src/lib/gacha/v3/generator.ts
src/lib/gacha/v3/data.ts

# V4å‹å®šç¾©
src/lib/gacha/v4/types.ts
src/lib/gacha/v4/generator.ts
src/lib/gacha/v4/data.ts
```

### 2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```bash
# V4ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
src/components/gacha/gacha-v4-player.tsx
```

### 3. APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```bash
# V4ã‚¬ãƒãƒ£API
src/app/api/gacha/v4/play/route.ts
src/app/api/gacha/v4/result/route.ts
```

### 4. å¿…è¦ãªä¿®æ­£

ã‚³ãƒ”ãƒ¼å¾Œã€ä»¥ä¸‹ã‚’ä¿®æ­£ï¼š

#### `src/lib/gacha/v3/data.ts` & `src/lib/gacha/v4/data.ts`
```typescript
// ä¿®æ­£å‰
import { getSupabaseServiceClient } from "@/lib/supabase/service";

// ä¿®æ­£å¾Œ
import { getServiceSupabase } from "@/lib/supabase/service";

// é–¢æ•°å‘¼ã³å‡ºã—ã‚‚å¤‰æ›´
const supabase = getServiceSupabase();
```

#### `src/lib/gacha/v3/utils.ts`
```typescript
// ä¿®æ­£å‰
import { publicEnv } from "@/lib/env";
const base = publicEnv.NEXT_PUBLIC_R2_PUBLIC_BASE_URL;

// ä¿®æ­£å¾Œ
const base = process.env.NEXT_PUBLIC_R2_PUBLIC_BASE_URL;
```

#### `src/app/api/gacha/v4/play/route.ts`
```typescript
// èªè¨¼ã‚’æ¥ä¸–ã‚¬ãƒãƒ£ã®æ–¹å¼ã«å¤‰æ›´
import { getServiceSupabase } from "@/lib/supabase/service";
import { fetchAuthedContext } from "@/lib/app/session";

export async function POST() {
  const supabase = getServiceSupabase();
  const context = await fetchAuthedContext(supabase);
  
  if (!context) {
    return NextResponse.json({ error: "Unauthorized" }, { status: 401 });
  }
  
  const { user } = context;
  // ...
}
```

#### `src/app/api/gacha/v4/result/route.ts`
```typescript
// gacha_results ã®ã‚«ãƒ©ãƒ åã‚’æ¥ä¸–ã‚¬ãƒãƒ£ç”¨ã«èª¿æ•´
const insertPayload = picked.map((card) => ({
  app_user_id: user.id,
  history_id: historyRow.id,
  card_id: card.id,
  obtained_via: "gacha_v4",
  star_level: card.star,
  had_reversal: false,
  scenario_snapshot: {},
  card_awarded: true,
  metadata: {},
  created_at: new Date().toISOString(),
}));

// å‹ã‚¨ãƒ©ãƒ¼å›é¿ã®ãŸã‚ any ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³
// eslint-disable-next-line @typescript-eslint/no-explicit-any
const { data: insertedResults, error: insertErr } = await supabase
  .from("gacha_results")
  .insert(insertPayload as any)
  .select("id, card_id");
```

---

## ğŸ”§ ã‚¬ãƒãƒ£ãƒšãƒ¼ã‚¸ã®æ›´æ–°

### `src/app/(main)/gacha/page.tsx`

```typescript
// ä¿®æ­£å‰
import { GachaNeonPlayer } from "@/components/gacha/gacha-neon-player";

// ä¿®æ­£å¾Œ
import { GachaV4Player } from "@/components/gacha/gacha-v4-player";

// ãƒœã‚¿ãƒ³éƒ¨åˆ†
<GachaV4Player playVariant="round" playLabel="ã‚¬ãƒãƒ£ã‚’å§‹ã‚ã‚‹" />
```

---

## âš™ï¸ ç’°å¢ƒå¤‰æ•°è¨­å®š

### `.env.local` ã«è¿½åŠ 

```bash
# R2ãƒã‚±ãƒƒãƒˆå…¬é–‹URLï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
NEXT_PUBLIC_R2_PUBLIC_BASE_URL=https://your-bucket.r2.cloudflarestorage.com

# ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã®å ´åˆã¯ä¸è¦ï¼ˆè‡ªå‹•çš„ã« /public/videos/ ã‚’ä½¿ç”¨ï¼‰
```

---

## ğŸš€ å®Ÿè£…æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æº–å‚™
```bash
# Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§æ–°ã—ã„ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ
# ã¾ãŸã¯
npx supabase migration new add_v4_gacha_tables

# ä¸Šè¨˜SQLã‚’å®Ÿè¡Œ
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ”ãƒ¼
```bash
cd /mnt/e/dev/Cusor/tensei

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir -p src/lib/gacha/v3 src/lib/gacha/v4

# V3ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
cp /mnt/e/dev/Cusor/sonshi/sonshigacha/src/lib/gacha/v3/*.ts src/lib/gacha/v3/

# V4ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
cp /mnt/e/dev/Cusor/sonshi/sonshigacha/src/lib/gacha/v4/*.ts src/lib/gacha/v4/

# ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚³ãƒ”ãƒ¼
cp /mnt/e/dev/Cusor/sonshi/sonshigacha/src/components/gacha/gacha-v4-player.tsx src/components/gacha/

# APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ã‚³ãƒ”ãƒ¼
mkdir -p src/app/api/gacha/v4/play src/app/api/gacha/v4/result
cp /mnt/e/dev/Cusor/sonshi/sonshigacha/src/app/api/gacha/v4/play/route.ts src/app/api/gacha/v4/play/
cp /mnt/e/dev/Cusor/sonshi/sonshigacha/src/app/api/gacha/v4/result/route.ts src/app/api/gacha/v4/result/
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ä¿®æ­£é©ç”¨
```bash
# getSupabaseServiceClient ã‚’ getServiceSupabase ã«ç½®æ›
sed -i 's/getSupabaseServiceClient/getServiceSupabase/g' src/lib/gacha/v3/data.ts src/lib/gacha/v4/data.ts

# ãã®ä»–ã®ä¿®æ­£ã‚’æ‰‹å‹•ã§å®Ÿæ–½ï¼ˆä¸Šè¨˜ã€Œå¿…è¦ãªä¿®æ­£ã€å‚ç…§ï¼‰
```

### ã‚¹ãƒ†ãƒƒãƒ—4: ã‚¬ãƒãƒ£ãƒšãƒ¼ã‚¸æ›´æ–°
```bash
# src/app/(main)/gacha/page.tsx ã‚’ç·¨é›†
# GachaNeonPlayer â†’ GachaV4Player ã«å¤‰æ›´
```

### ã‚¹ãƒ†ãƒƒãƒ—5: å‹•ç”»é…ç½®
```bash
# ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã®å ´åˆ
mkdir -p public/videos
# å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ public/videos/ ã«é…ç½®

# æœ¬ç•ªç’°å¢ƒã®å ´åˆ
# R2ãƒã‚±ãƒƒãƒˆã«å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
```

### ã‚¹ãƒ†ãƒƒãƒ—6: ãƒ“ãƒ«ãƒ‰ç¢ºèª
```bash
npm run lint
npm run build

# ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹å ´åˆã¯å‹å®šç¾©ã‚’èª¿æ•´
```

### ã‚¹ãƒ†ãƒƒãƒ—7: å‹•ä½œç¢ºèª
```bash
npm run dev
# http://localhost:3000/gacha ã«ã‚¢ã‚¯ã‚»ã‚¹
# ã€Œã‚¬ãƒãƒ£ã‚’å§‹ã‚ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å…¨ç”»é¢å‹•ç”»æ¼”å‡ºã‚’ç¢ºèª
```

---

## ğŸ¨ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒã‚¤ãƒ³ãƒˆ

### 1. ãƒ†ãƒ­ãƒƒãƒ—ç”»åƒ
- `/public/telop/` ã«ä»¥ä¸‹ã®ç”»åƒã‚’é…ç½®:
  - `continue-1.png` ~ `continue-5.png`
  - `win.png`
  - `big-win.png`
  - `jackpot.png`
  - `lose.png`
  - `chase.png`

### 2. ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
- `gacha-v4-player.tsx` ã® `getParticlePreset()` é–¢æ•°ã§èª¿æ•´
- è‰²ã€æ•°ã€é‡åŠ›ã€ãƒ–ãƒ¬ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½

### 3. ã‚·ãƒŠãƒªã‚ªè¨­è¨ˆ
- `story_scenarios` ãƒ†ãƒ¼ãƒ–ãƒ«ã§ç‹¬è‡ªã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å±•é–‹ã‚’è¨­è¨ˆ
- `video_sequence` é…åˆ—ã§å‹•ç”»ã®å†ç”Ÿé †åºã‚’åˆ¶å¾¡
- `weight` ã§å‡ºç¾ç¢ºç‡ã‚’èª¿æ•´

---

## âš ï¸ æ³¨æ„äº‹é …

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®é•ã„
- å°Šå¸«ã‚¬ãƒãƒ£ã¨æ¥ä¸–ã‚¬ãƒãƒ£ã§ã¯ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ãŒç•°ãªã‚Šã¾ã™
- `gacha_results` ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚«ãƒ©ãƒ åãŒç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
- å¿…è¦ã«å¿œã˜ã¦å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ (`as any`) ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„

### ãƒã‚±ãƒƒãƒˆæ¶ˆè²»
- `FREE_PLAY_EMAILS` é…åˆ—ã«é–‹ç™ºç”¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã¨ã€ãƒã‚±ãƒƒãƒˆæ¶ˆè²»ãªã—ã§ãƒ†ã‚¹ãƒˆå¯èƒ½

### å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º
- å¤§ãã™ãã‚‹å‹•ç”»ã¯èª­ã¿è¾¼ã¿ãŒé…ããªã‚Šã¾ã™
- 5MBä»¥ä¸‹/ãƒ•ã‚¡ã‚¤ãƒ« ã‚’æ¨å¥¨
- å¿…è¦ã«å¿œã˜ã¦åœ§ç¸®ã—ã¦ãã ã•ã„

---

## ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

- **å°Šå¸«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: `/mnt/e/dev/Cusor/sonshi/sonshigacha/`
- **V4ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `sonshigacha/src/components/gacha/gacha-v4-player.tsx`
- **V4ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼**: `sonshigacha/src/lib/gacha/v4/generator.ts`
- **å°Šå¸«ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabase ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆå°Šå¸«ã‚¬ãƒãƒ£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰

---

## âœ… å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

å®Ÿè£…å®Œäº†æ™‚ã«ç¢ºèª:

- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†
- [ ] V3/V4å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®å®Œäº†
- [ ] GachaV4Playerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé…ç½®å®Œäº†
- [ ] V4 APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…å®Œäº†
- [ ] é–¢æ•°åãƒ»ã‚«ãƒ©ãƒ åã®ä¿®æ­£å®Œäº†
- [ ] ã‚¬ãƒãƒ£ãƒšãƒ¼ã‚¸æ›´æ–°å®Œäº†
- [ ] å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®å®Œäº†
- [ ] ç’°å¢ƒå¤‰æ•°è¨­å®šå®Œäº†
- [ ] `npm run lint` æˆåŠŸ
- [ ] `npm run build` æˆåŠŸ
- [ ] å‹•ä½œç¢ºèªï¼ˆå…¨ç”»é¢å‹•ç”»å†ç”Ÿï¼‰å®Œäº†
- [ ] ãƒ†ãƒ­ãƒƒãƒ—è¡¨ç¤ºç¢ºèªå®Œäº†
- [ ] ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆç¢ºèªå®Œäº†
- [ ] ã‚«ãƒ¼ãƒ‰ç²å¾—å‡¦ç†ç¢ºèªå®Œäº†

---

**ä½œæˆè€…**: Droid  
**æœ€çµ‚æ›´æ–°æ—¥**: 2026-02-13
